// Generated by CoffeeScript 1.4.0
(function(){NAN.Mouse=function(){function e(){this.path=[],this.state="none"}return e.prototype.checkPath=function(){var e,t,n,r;t=!0,this.path.length<2&&(t=!1);for(e=n=0,r=this.path.length-1;0<=r?n<r:n>r;e=0<=r?++n:--n)this.path[e].grid.isConnecting(this.path[e+1].grid)===!1&&(t=!1);return t},e.prototype.evaluatePath=function(){var e,t,n,r,i,s;t="",s=this.path;for(r=0,i=s.length;r<i;r++)e=s[r],n=e.grid.value,t+=n.toString();return t},e.prototype.beginPath=function(){return this.path=[],this.state="select"},e.prototype.endPath=function(){var e,t,n,r,i,s,o,u,a;if(this.state==="none")return;if(this.checkPath()){n=this.evaluatePath(),r=$.analyzer.analyze(n),$.numberShow=new NAN.NumberShow({n:n,descriptions:r.descriptions.filter(function(e){return e!==null&&e!==""}).join("<br>"),score:r.score}),$.game.score.addValue(r.score);if(r.score!==0)for(e=i=0,u=this.path.length;0<=u?i<u:i>u;e=0<=u?++i:--i)t=this.path[e],t.grid.clean()}a=this.path;for(s=0,o=a.length;s<o;s++)t=a[s],t.grid.selected=!1;return this.state="none",this.path=[]},e.prototype.addGrid=function(e){var t,n,r,i,s;if(this.path.length>=9)return;if(this.path.length===0&&e.value===0)return;t=!1,s=this.path;for(r=0,i=s.length;r<i;r++)n=s[r],n.x===e.x&&n.y===e.y&&(t=!0);if(!t)if(this.path.length===0||this.path[this.path.length-1].grid.isConnecting(e))return e.selected=!0,n={x:e.x,y:e.y,grid:e},this.path.push(n)},e}()}).call(this);